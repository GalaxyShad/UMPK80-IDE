import * as monaco from 'monaco-editor';

const intel8080Conf: monaco.languages.LanguageConfiguration = {
  comments: {
    lineComment: ';',
  },
  brackets: [
    ['[', ']'],
  ],
  autoClosingPairs: [
    { open: '{', close: '}' },
    { open: '[', close: ']' },
    { open: '(', close: ')' },
    { open: '"', close: '"', notIn: ['string'] },
  ],
  surroundingPairs: [
    { open: '{', close: '}' },
    { open: '[', close: ']' },
    { open: '(', close: ')' },
    { open: '"', close: '"' },
  ],
};

const intel8080Language: monaco.languages.IMonarchLanguage = {
  defaultToken: '',
  tokenPostfix: '.8080asm',
  ignoreCase: true,
  brackets: [
    { open: '[', close: ']', token: 'delimiter.square' },
  ],
  keywords: [
    'ADD',
    'ADI',
    'ADC',
    'ACI',
    'ANA',
    'ANI',
    'CALL',
    'CZ',
    'CNZ',
    'CP',
    'CM',
    'CC',
    'CNC',
    'CPE',
    'CPO',
    'CMA',
    'CMC',
    'CMP',
    'CPI',
    'DAA',
    'DAD',
    'DCR',
    'DCX',
    'DI',
    'EI',
    'HLT',
    'IN',
    'INR',
    'INX',
    'JMP',
    'JZ',
    'JNZ',
    'JP',
    'JM',
    'JC',
    'JNC',
    'JPE',
    'JPO',
    'LDA',
    'LDAX',
    'LHLD',
    'LXI',
    'MOV',
    'MVI',
    'NOP',
    'ORA',
    'ORI',
    'OUT',
    'PCHL',
    'POP',
    'PUSH',
    'RAL',
    'RAR',
    'RLC',
    'RRC',
    'RET',
    'RZ',
    'RNZ',
    'RP',
    'RM',
    'RC',
    'RNC',
    'RPE',
    'RPO',
    'RST',
    'SPHL',
    'SHLD',
    'STA',
    'STAX',
    'STC',
    'SUB',
    'SUI',
    'SBB',
    'SBI',
    'XCHG',
    'XTHL',
    'XRA',
    'XRI',
    'DS',
    'DW',
    'DB'
  ],
  operators: [
    '+',
    '-',
    '*',
    '/',
    '=',
    '<',
    '>',
    '!',
    '&',
    '|',
    '^',
    '%',
    ':'
  ],

  tokenizer: {
    root: [
      [/[+\-*\/\=<>!\&\|%]/, 'operator'],
      [/[a-zA-Z_]\w*/, { cases: { '@keywords': 'keyword', '@default': 'identifier' } }],
      [/;[^\n]*/, 'comment'],
      [/\s+/, ''], 
      [/\s+\:/, 'delimiter'], // labels
      [/[0-7]+[OoQq]/, 'number.octal'], 
      [/[01]+[01\_]*[01]+[bB]/, 'number.binary'], 
      [/\d+([\dA-F])*[hH]/, 'number.hex'], 
      [/\d+[dD]?/, 'number.decimal'],
    ],
  },
};

export { intel8080Conf, intel8080Language };
